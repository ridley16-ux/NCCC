<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BHEJTM2PGH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-BHEJTM2PGH');
</script>
<meta charset="UTF-8" />
<title>No Context Cinema Club – Listen Now</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="website-version" content="1.84" />

<style>
:root {
  --bg: #0f0f0f;
  --card: #1b1b1b;
  --text: #ffffff;
  --line: rgba(255, 255, 255, 0.1);
  --accent-rob: #d1632e;
}

* { box-sizing: border-box; }

html { overflow-x: visible; }

body {
  font-family: Arial, Helvetica, sans-serif;
  background: var(--bg);
  color: var(--text);
  margin: 0;
  padding: 0;
  overflow-x: clip;
  overflow-y: scroll;
  scrollbar-gutter: stable;
}

img, svg {
  max-width: 100%;
  height: auto;
}

nav {
  display: flex;
  justify-content: center;
  gap: 12px;
  margin-bottom: 24px;
  flex-wrap: wrap;
}

nav a {
  background: #2c2c2c;
  color: #fff;
  text-decoration: none;
  padding: 10px 16px;
  border-radius: 20px;
  font-weight: bold;
}

nav a.active {
  background: #d1632e;
}

.site-title {
  text-align: ter;
  margin: 0 0 12px;
  color: #c06131;
  font-family: Georgia, "Times New Roman", serif;
}
.site-title img {
  display: block;
  max-width: 320px;
  width: 100%;
  height: auto;
  margin: 0 auto;
}

.sticky-menu {
  position: sticky;
  top: 0;
  z-index: 1000;
  background: #0f0f0f;
  padding: 16px;
  margin: 0 0 24px;
}

.sticky-menu::after {
  content: "";
  display: block;
  height: 10px;
  margin-top: 12px;
  background: linear-gradient(to bottom, #59615b 30%, #1a1a1a 30%);
}

.content {
  max-width: 800px;
  margin: 0 auto;
  background: #232323;
  border-radius: 12px;
  padding: 24px;
  line-height: 1.6;
}

.listen {
  margin-top: 12px;
}

.listen-intro {
  margin: 12px 0 16px;
}

.listen-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 12px;
}

.listen-btn {
  display: flex;
  align-items: center;
  gap: 14px;
  width: 100%;
  padding: 16px;
  border-radius: 14px;
  background: var(--card, #1b1b1b);
  color: var(--text, #fff);
  text-decoration: none;
  border: 1px solid rgba(255, 255, 255, 0.08);
  min-height: 64px;
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
  transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
}

.listen-btn:hover {
  background: rgba(255, 255, 255, 0.06);
  transform: translateY(-1px);
  box-shadow: 0 10px 18px rgba(0, 0, 0, 0.35);
}

.listen-btn:focus-visible {
  outline: 3px solid rgba(245, 154, 79, 0.6);
  outline-offset: 2px;
}

.listen-logo,
.listen-icon {
  height: 26px;
  width: 26px;
  flex: 0 0 auto;
}

.listen-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-weight: 800;
  font-size: 16px;
}

.listen-text {
  display: flex;
  flex-direction: column;
  line-height: 1.1;
  text-align: left;
}

.listen-title {
  font-weight: 800;
  font-size: 16px;
}

.listen-subtitle {
  font-size: 12px;
  opacity: 0.75;
  margin-top: 4px;
}

.listen-btn--cta {
  background: var(--accent-rob, #f59a4f);
  color: #111;
  border: none;
}

.listen-btn--cta:hover {
  filter: brightness(1.03);
}

.listen-btn--cta .listen-subtitle {
  opacity: 0.8;
}

.upcoming-banner-wrap {
  margin: 0 auto 20px;
  max-width: 800px;
  display: flex;
  justify-content: center;
}

.upcoming-banner {
  display: flex;
  gap: 18px;
  align-items: center;
  background: #241e1a;
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: 16px;
  padding: 18px;
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.35);
  flex-wrap: nowrap;
}

.upcoming-banner__calendar {
  flex: 0 0 90px;
  background: #fff;
  border: none;
  border-radius: 12px;
  padding: 0;
  text-align: center;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  gap: 4px;
  height: 90px;
  overflow: hidden;
}

.upcoming-banner__month {
  display: block;
  font-size: 14px;
  font-weight: 700;
  letter-spacing: 1.2px;
  padding: 4px 6px 3px;
  background: #d94b3b;
  color: #fff;
}

.upcoming-banner__day {
  font-size: 32px;
  font-weight: 800;
  line-height: 1;
  color: #111;
}

.upcoming-banner__weekday {
  font-size: 12px;
  letter-spacing: 1px;
  color: rgba(17, 17, 17, 0.7);
  padding-bottom: 6px;
}

.upcoming-banner__content {
  display: flex;
  flex-direction: column;
  gap: 10px;
  flex: 1;
  min-height: 90px;
  justify-content: center;
  text-align: center;
}

.upcoming-banner__label {
  font-size: 12px;
  letter-spacing: 2px;
  color: #f5b689;
  font-weight: 700;
}

.upcoming-banner__title {
  font-size: 20px;
  margin: 0;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
  overflow: hidden;
}

.upcoming-banner__copy {
  margin: 0;
  font-size: 14px;
  color: rgba(255, 255, 255, 0.75);
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 1;
  overflow: hidden;
}

@media (min-width: 768px) {
  .listen-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .listen-btn--cta {
    grid-column: 1 / -1;
  }
}


@media (max-width: 520px) {
  .site-title img {
    max-width: 100%;
    width: 100%;
  }
}

</style>
</head>

<body>
<div class="sticky-menu">
  <h1 class="site-title">
    <img src="https://i.postimg.cc/BQqdVY8W/No-Con-Cin-Club-Web-Title-Large.png" alt="No Context Cinema Club" />
  </h1>
  <nav>
    <a href="index.html">Films</a>
    <a href="listen.html" class="active">Latest Episode</a>
    <a href="contact.html">Contact Us</a>
  </nav>
</div>

<div id="upcoming-episode-banner" class="upcoming-banner-wrap" aria-live="polite"></div>

<div class="content">
  <h2>Listen Now</h2>
  <div id="buzzsprout-large-player-artist-kev-rob"></div>
  <script
    type="text/javascript"
    charset="utf-8"
    src="https://www.buzzsprout.com/2591128.js?artist=Kev+%26+Rob&container_id=buzzsprout-large-player-artist-kev-rob&player=large"
  ></script>
  <section class="listen">
    <p class="listen-intro">Stream the newest episode or jump into the backlog.</p>

    <div class="listen-grid">
      <a class="listen-btn listen-btn--cta" href="REPLACE_WITH_LATEST_EPISODE_LINK" target="_blank" rel="noreferrer">
        <span class="listen-icon" aria-hidden="true">▶</span>
        <span class="listen-text">
          <span class="listen-title">Latest Episode</span>
          <span class="listen-subtitle">Opens in your preferred app</span>
        </span>
      </a>

      <a class="listen-btn" href="REPLACE_WITH_SPOTIFY_LINK" target="_blank" rel="noreferrer">
        <img class="listen-logo" src="assets/logos/spotify.svg" alt="Spotify logo">
        <span class="listen-text">
          <span class="listen-title">Spotify</span>
          <span class="listen-subtitle">Listen</span>
        </span>
      </a>

      <a class="listen-btn" href="REPLACE_WITH_APPLE_LINK" target="_blank" rel="noreferrer">
        <img class="listen-logo" src="assets/logos/apple-podcasts.svg" alt="Apple Podcasts logo">
        <span class="listen-text">
          <span class="listen-title">Apple Podcasts</span>
          <span class="listen-subtitle">Listen</span>
        </span>
      </a>

      <a class="listen-btn" href="REPLACE_WITH_YOUTUBE_LINK" target="_blank" rel="noreferrer">
        <img class="listen-logo" src="assets/logos/youtube.svg" alt="YouTube logo">
        <span class="listen-text">
          <span class="listen-title">YouTube</span>
          <span class="listen-subtitle">Watch</span>
        </span>
      </a>
    </div>
  </section>
</div>
<div id="site-footer"></div>
<script>
  const footerContainer = document.getElementById("site-footer");
  fetch("assets/footer.html")
    .then((response) => response.text())
    .then((html) => {
      footerContainer.innerHTML = html;
    })
    .catch((error) => {
      console.error("Failed to load footer:", error);
    });
</script>
<script>
const MANIFEST_URL = "./films/manifest.json";

function parseLocalDate(dateString) {
  if (!dateString) return null;
  const [year, month, day] = dateString.split("-").map(Number);
  if (!year || !month || !day) return null;
  const date = new Date(year, month - 1, day);
  return Number.isNaN(date.getTime()) ? null : date;
}

function getTodayStart() {
  const now = new Date();
  return new Date(now.getFullYear(), now.getMonth(), now.getDate());
}

function formatUpper(value) {
  return value ? value.toUpperCase() : "";
}

function buildBanner(episode) {
  const date = parseLocalDate(episode.podcastDate);
  if (!date) return "";
  const month = formatUpper(date.toLocaleDateString("en-GB", { month: "short" }));
  const weekday = formatUpper(date.toLocaleDateString("en-GB", { weekday: "long" }));
  const day = date.getDate();
  return `
    <div class="upcoming-banner">
      <div class="upcoming-banner__calendar">
        <span class="upcoming-banner__month">${month}</span>
        <span class="upcoming-banner__day">${day}</span>
        <span class="upcoming-banner__weekday">${weekday}</span>
      </div>
      <div class="upcoming-banner__content">
        <span class="upcoming-banner__label">Don't miss our next episode...</span>
        <h3 class="upcoming-banner__title">${episode.title}</h3>
        <p class="upcoming-banner__copy">Subscribe now!</p>
      </div>
    </div>
  `;
}

async function loadUpcomingEpisodeBanner() {
  const banner = document.getElementById("upcoming-episode-banner");
  if (!banner) return;
  try {
    const manifestRes = await fetch(MANIFEST_URL);
    const manifest = await manifestRes.json();
    const robEntries = (manifest.films || []).filter((entry) => entry.active && entry.path.includes("/robs/"));
    const filmData = await Promise.all(
      robEntries.map(async (entry) => {
        const response = await fetch(entry.path);
        return response.ok ? response.json() : null;
      })
    );
    const todayStart = getTodayStart();
    const upcoming = filmData
      .filter((film) => film && film.podcastDate)
      .map((film) => ({ ...film, parsedDate: parseLocalDate(film.podcastDate) }))
      .filter((film) => film.parsedDate && film.parsedDate.getTime() > todayStart.getTime())
      .sort((a, b) => a.parsedDate - b.parsedDate)[0];
    if (!upcoming) {
      banner.innerHTML = "";
      return;
    }
    banner.innerHTML = buildBanner(upcoming);
  } catch (error) {
    console.error("Unable to load upcoming episode banner", error);
    banner.innerHTML = "";
  }
}

document.addEventListener("DOMContentLoaded", loadUpcomingEpisodeBanner);
</script>
</body>
</html>
